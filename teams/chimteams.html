<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chimteams - Loyalty Betting</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font globally */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom style for subtle transitions */
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
        /* Style for the simulated 'locked' state */
        .locked-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(107, 114, 128, 0.75); /* gray-500 with opacity */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            font-weight: bold;
            border-radius: 0.5rem; /* rounded-lg */
            z-index: 10;
            opacity: 0;
            pointer-events: none; /* Allow clicks through when hidden */
        }
        .locked .locked-overlay {
            opacity: 1;
            pointer-events: auto; /* Block clicks when visible */
        }
        .locked .betting-interface {
             filter: blur(2px); /* Optional: blur content behind overlay */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 md:p-8">

    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">

        <header class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-6">
            <h1 class="text-3xl font-bold">Chimteams</h1>
            <p class="text-indigo-100 mt-1">Bet on your team. Get locked on loss. Redeem on win (Stake + 1%).</p>
        </header>

        <main class="p-6 md:p-8 space-y-8">

            <section id="betting-section" class="relative">
                 <div id="locked-overlay" class="locked-overlay">
                    <div>
                        <p class="text-2xl mb-2">üîí Funds Locked!</p>
                        <p>Your <strong id="locked-amount-display-overlay">$0.00</strong> stake is invested.</p>
                        <p>Waiting for <strong id="locked-team-name">[Team Name]</strong> to win!</p>
                        <p class="mt-4 text-sm">Redemption value: Stake + 1%</p>
                        <button onclick="simulateWin()" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-all text-sm">
                            Simulate Win & Redeem
                        </button>
                    </div>
                </div>

                <div id="betting-interface" class="betting-interface space-y-6">
                    <h2 class="text-2xl font-semibold text-gray-700 border-b pb-2">Place Your Bet</h2>

                    <div>
                        <label for="team-input" class="block text-sm font-medium text-gray-600 mb-1">1. Enter Team Name:</label>
                        <input type="text" id="team-input" name="team" placeholder="Search or type team name (e.g., Lakers, Real Madrid)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                        </div>

                    <div>
                        <label for="stake-input" class="block text-sm font-medium text-gray-600 mb-1">2. Enter Your Stake (Max $100):</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">$</span>
                            <input type="number" id="stake-input" name="stake" min="1" max="100" placeholder="e.g., 50" class="w-full pl-7 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                        </div>
                         <p class="text-xs text-gray-500 mt-1">Max bet is $100.</p>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4">
                        <button onclick="simulateLoss()" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-6 rounded-lg transition-all">
                            Simulate Team Loss (Lock Funds)
                        </button>
                         <button onclick="simulateWin()" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-all">
                            Simulate Team Win (Stake + 1%)
                        </button>
                    </div>

                    <div id="status-message" class="mt-4 p-4 bg-blue-50 border border-blue-200 text-blue-700 rounded-lg text-center hidden">
                        </div>
                </div>
            </section>

            <section id="investment-dashboard" class="bg-gray-50 p-6 rounded-lg border border-gray-200 hidden">
                 <h2 class="text-xl font-semibold text-gray-700 mb-4">Investment Dashboard</h2>
                 <p class="text-gray-600 mb-2">Your locked funds (<strong id="locked-amount-display-dash">$0.00</strong>) are currently invested.</p>
                 <div class="bg-white p-4 rounded shadow-sm border">
                     <p class="font-medium">Investment Pool:</p>
                     <p class="text-sm text-gray-500">[Details about where funds are invested, e.g., Low-Risk ETF Blend, High-Yield Savings Account]. Transparency is key!</p>
                     <p class="mt-2 font-medium">Redemption Value:</p>
                     <p class="text-sm text-gray-500">Upon your selected team's next win, you will receive your original stake back plus a 1% bonus.</p>
                 </div>
                 <p class="text-xs text-gray-500 mt-4">Note: This is a simplified representation. Actual investment details would be provided in a live platform.</p>
            </section>

            <section class="bg-teal-50 p-6 rounded-lg border border-teal-200">
                <h2 class="text-xl font-semibold text-teal-800 mb-4">üéóÔ∏è Our Commitment</h2>
                 <p class="text-teal-700">A portion of platform profits supports responsible gambling initiatives.</p>
                 <div class="mt-3 text-center">
                     <p class="text-lg font-semibold text-teal-800">[Amount/Percentage Donated]</p>
                     <p class="text-sm text-teal-600">Tracked transparently [Link to details/reports]</p>
                 </div>
            </section>

        </main>

        <footer class="bg-gray-800 text-gray-300 p-6 text-center text-sm">
            <p>&copy; 2025 Chimteams. All rights reserved.</p>
            <p class="mt-1">This is a conceptual prototype. Real-money operations require legal compliance (betting/financial licenses, KYC/AML).</p>
            <div class="mt-2 space-x-4">
                <a href="#" class="hover:text-white">Terms of Service</a>
                <a href="#" class="hover:text-white">Privacy Policy</a>
                <a href="#" class="hover:text-white">Responsible Gambling</a>
            </div>
        </footer>

    </div>

    <script>
        // Get DOM elements
        const bettingSection = document.getElementById('betting-section');
        const bettingInterface = document.getElementById('betting-interface');
        const lockedOverlay = document.getElementById('locked-overlay');
        const teamInput = document.getElementById('team-input'); // Changed from teamSelect
        const stakeInput = document.getElementById('stake-input');
        const statusMessage = document.getElementById('status-message');
        const lockedTeamName = document.getElementById('locked-team-name');
        // Removed interestDisplay as interest is now fixed at 1% on redemption
        const investmentDashboard = document.getElementById('investment-dashboard');
        const lockedAmountDisplayOverlay = document.getElementById('locked-amount-display-overlay'); // Added for overlay
        const lockedAmountDisplayDash = document.getElementById('locked-amount-display-dash'); // Added for dashboard

        let currentStake = 0;
        let selectedTeam = '';
        let isLocked = false;
        // Removed interestTimer and accumulatedInterest

        // --- Simulation Functions ---

        function simulateLoss() {
            selectedTeam = teamInput.value.trim(); // Use teamInput now and trim whitespace
            const stakeValue = parseFloat(stakeInput.value);

            // Basic validation
            if (!selectedTeam) {
                showStatusMessage('Please enter a team name first.', 'error');
                return;
            }
            if (isNaN(stakeValue) || stakeValue <= 0 || stakeValue > 100) {
                showStatusMessage('Please enter a valid stake between $1 and $100.', 'error');
                return;
            }

            currentStake = stakeValue;
            isLocked = true;

            // Update UI for locked state
            bettingSection.classList.add('locked');
            lockedTeamName.textContent = selectedTeam;
            lockedAmountDisplayOverlay.textContent = formatCurrency(currentStake); // Update overlay amount
            lockedAmountDisplayDash.textContent = formatCurrency(currentStake); // Update dashboard amount
            investmentDashboard.classList.remove('hidden'); // Show dashboard
            showStatusMessage(`Your ${formatCurrency(currentStake)} stake on ${selectedTeam} is now locked due to a loss.`, 'info');

            // No interest accumulation timer needed anymore
        }

        function simulateWin() {
            const stakeValue = parseFloat(stakeInput.value);
            const teamValue = teamInput.value.trim(); // Get team name for immediate win check

            // If not locked, simulate an instant win (Stake + 1%)
            if (!isLocked) {
                 selectedTeam = teamValue; // Use current input value
                 // Validation for immediate win scenario
                 if (!selectedTeam || isNaN(stakeValue) || stakeValue <= 0 || stakeValue > 100) {
                    showStatusMessage('Enter team name and valid stake ($1-$100) to simulate a win.', 'error');
                    return;
                 }
                 const winAmount = stakeValue * 1.01; // Calculate stake + 1%
                 showStatusMessage(`Congratulations! ${selectedTeam} won! Your ${formatCurrency(stakeValue)} stake is returned plus 1%. Total: ${formatCurrency(winAmount)}.`, 'success');
                 // Reset inputs for next bet (optional)
                 // teamInput.value = '';
                 // stakeInput.value = '';
                 return; // Exit function, no unlocking needed
            }

            // If currently locked, simulate redemption (Stake + 1%)
            // Note: selectedTeam is already set from when the bet was locked
            const redemptionAmount = currentStake * 1.01; // Calculate stake + 1%
            const profit = redemptionAmount - currentStake;
            showStatusMessage(`Redeemed! ${selectedTeam} won! You received your ${formatCurrency(currentStake)} stake + ${formatCurrency(profit)} (1% bonus). Total: ${formatCurrency(redemptionAmount)}.`, 'success');

            // Reset state and UI
            isLocked = false;
            currentStake = 0;
            // selectedTeam remains from the locked bet, maybe clear input?
            teamInput.value = ''; // Clear input field after redemption

            bettingSection.classList.remove('locked');
            investmentDashboard.classList.add('hidden'); // Hide dashboard
            stakeInput.value = ''; // Reset stake input
        }

        // --- Helper Functions ---

        function showStatusMessage(message, type = 'info') {
            statusMessage.textContent = message;
            // Clear previous styles
            statusMessage.className = 'mt-4 p-4 rounded-lg text-center'; // Base classes

            if (type === 'error') {
                statusMessage.classList.add('bg-red-50', 'border', 'border-red-200', 'text-red-700');
            } else if (type === 'success') {
                 statusMessage.classList.add('bg-green-50', 'border', 'border-green-200', 'text-green-700');
            } else { // 'info' or default
                statusMessage.classList.add('bg-blue-50', 'border', 'border-blue-200', 'text-blue-700');
            }
            // statusMessage.classList.remove('hidden'); // Make it visible (already handled by removing hidden)

             // Optional: Hide message after a few seconds
             setTimeout(() => {
                 // Check if the message is still the same before hiding
                 if (statusMessage.textContent === message) {
                    statusMessage.className += ' hidden'; // Add hidden class back
                 }
             }, 6000); // Hide after 6 seconds
        }

        function formatCurrency(amount) {
            // Use Intl.NumberFormat for better currency formatting potentially
            // return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);
            // Simple formatting for now:
             return '$' + amount.toFixed(2);
        }

         // Initial setup - Hide dashboard
         investmentDashboard.classList.add('hidden');

    </script>

</body>
</html>
